(this["webpackJsonpreact-adminv4"]=this["webpackJsonpreact-adminv4"]||[]).push([[14],{721:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return S}));a(248);var n,i,l=a(155),r=(a(92),a(25)),o=(a(374),a(251)),c=a(10),s=a(5),u=a(6),d=a(7),m=a(8),p=a(0),f=a.n(p),b=a(249),g=a(40),h=a(27),v=Object(g.a)({ajax:!0,modal:{title:function(e){return e.isEdit?"\u4fee\u6539\u7528\u6237":"\u6dfb\u52a0\u7528\u6237"}}})(n=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,data:{}},e.fetchData=function(){if(!e.state.loading){var t=e.props.id;e.setState({loading:!0}),e.props.ajax.get("/mock/users/".concat(t)).then((function(t){e.setState({data:t||{}})})).finally((function(){return e.setState({loading:!1})}))}},e.handleSubmit=function(t){if(!e.state.loading){var a=e.props.isEdit,n=a?e.props.ajax.put:e.props.ajax.post,i=a?"\u4fee\u6539\u6210\u529f\uff01":"\u6dfb\u52a0\u6210\u529f\uff01";e.setState({loading:!0}),n("/mock/users",t,{successTip:i}).then((function(){var t=e.props.onOk;t&&t()})).finally((function(){return e.setState({loading:!1})}))}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.isEdit&&this.fetchData()}},{key:"render",value:function(){var e=this,t=this.props.isEdit,a=this.state,n=a.loading,i=a.data,r={labelWidth:100};return f.a.createElement(h.g,{loading:n,okText:"\u4fdd\u5b58",cancelText:"\u91cd\u7f6e",onOk:function(){return e.form.submit()},onCancel:function(){return e.form.resetFields()}},f.a.createElement(l.a,{ref:function(t){return e.form=t},onFinish:this.handleSubmit,initialValues:i},t?f.a.createElement(h.c,Object.assign({},r,{type:"hidden",name:"id"})):null,f.a.createElement(h.c,Object.assign({},r,{label:"\u7528\u6237\u540d",name:"name",required:!0,noSpace:!0})),f.a.createElement(h.c,Object.assign({},r,{type:"number",label:"\u5e74\u9f84",name:"age",required:!0})),f.a.createElement(h.c,Object.assign({},r,{type:"select",label:"\u5de5\u4f5c",name:"job",options:[{value:"1",label:"\u524d\u7aef\u5f00\u53d1"},{value:"2",label:"\u540e\u7aef\u5f00\u53d1"}]})),f.a.createElement(h.c,Object.assign({},r,{type:"select",label:"\u804c\u4f4d",name:"position",options:[{value:"1",label:"\u5458\u5de5"},{value:"2",label:"CEO"}]})),f.a.createElement(h.c,Object.assign({},r,{type:"select",mode:"multiple",showSearch:!0,optionFilterProp:"children",label:"\u89d2\u8272",name:"role",options:[{value:"1",label:"\u5458\u5de5"},{value:"2",label:"CEO"}]}))))}}]),a}(p.Component))||n,S=Object(g.a)({path:"/users",ajax:!0})(i=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,dataSource:[],selectedRowKeys:[],total:0,pageNum:1,pageSize:20,deleting:!1,visible:!1,id:null},e.columns=[{title:"\u7528\u6237\u540d",dataIndex:"name",width:200},{title:"\u5e74\u9f84",dataIndex:"age",width:200},{title:"\u5de5\u4f5c",dataIndex:"job",width:200},{title:"\u804c\u4f4d",dataIndex:"position",width:200},{title:"\u64cd\u4f5c",dataIndex:"operator",width:100,render:function(t,a){var n=a.id,i=a.name,l=[{label:"\u7f16\u8f91",onClick:function(){return e.setState({visible:!0,id:n})}},{label:"\u5220\u9664",color:"red",confirm:{title:'\u60a8\u786e\u5b9a\u5220\u9664"'.concat(i,'"?'),onConfirm:function(){return e.handleDelete(n)}}}];return f.a.createElement(h.h,{items:l})}}],e.handleSubmit=function(t){if(!e.state.loading){var a=e.state,n=a.pageNum,i=a.pageSize,l=Object(c.a)({},t,{pageNum:n,pageSize:i});e.setState({loading:!0}),e.props.ajax.get("/mock/users",l).then((function(t){var a=(null===t||void 0===t?void 0:t.list)||[],n=(null===t||void 0===t?void 0:t.total)||0;e.setState({dataSource:a,total:n})})).finally((function(){return e.setState({loading:!1})}))}},e.handleDelete=function(t){e.state.deleting||(e.setState({deleting:!0}),e.props.ajax.del("/mock/users/".concat(t),null,{successTip:"\u5220\u9664\u6210\u529f\uff01",errorTip:"\u5220\u9664\u5931\u8d25\uff01"}).then((function(){return e.form.submit()})).finally((function(){return e.setState({deleting:!1})})))},e.handleBatchDelete=function(){if(!e.state.deleting){var t=e.state.selectedRowKeys,a=f.a.createElement("span",null,"\u60a8\u786e\u5b9a\u5220\u9664",f.a.createElement("span",{style:{padding:"0 5px",color:"red",fontSize:18}},t.length),"\u6761\u8bb0\u5f55\u5417\uff1f");o.a.confirm({title:"\u6e29\u99a8\u63d0\u793a",content:a,onOk:function(){e.setState({deleting:!0}),e.props.ajax.del("/mock/users",{ids:t},{successTip:"\u5220\u9664\u6210\u529f\uff01",errorTip:"\u5220\u9664\u5931\u8d25\uff01"}).then((function(){return e.form.submit()})).finally((function(){return e.setState({deleting:!1})}))}})}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.form.submit()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.deleting,i=t.dataSource,o=t.selectedRowKeys,c=t.total,s=t.pageNum,u=t.pageSize,d=t.visible,m=t.id,p={width:300},g=!(null===o||void 0===o?void 0:o.length);return f.a.createElement(b.a,null,f.a.createElement(h.j,null,f.a.createElement(l.a,{onFinish:this.handleSubmit,ref:function(t){return e.form=t}},f.a.createElement(h.d,null,f.a.createElement(h.c,Object.assign({},p,{label:"\u540d\u79f0",name:"name"})),f.a.createElement(h.c,Object.assign({},p,{type:"select",label:"\u804c\u4f4d",name:"job",options:[{value:1,label:1},{value:2,label:2}]})),f.a.createElement(h.c,{layout:!0,width:"auto"},f.a.createElement(r.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"),f.a.createElement(r.a,{onClick:function(){return e.form.resetFields()}},"\u91cd\u7f6e"))))),f.a.createElement(h.l,null,f.a.createElement(r.a,{type:"primary",onClick:function(){return e.setState({visible:!0,id:null})}},"\u6dfb\u52a0"),f.a.createElement(r.a,{danger:!0,loading:n,disabled:g,onClick:this.handleBatchDelete},"\u5220\u9664")),f.a.createElement(h.k,{rowSelection:{selectedRowKeys:o,onChange:function(t){return e.setState({selectedRowKeys:t})}},loading:a,columns:this.columns,dataSource:i,rowKey:"id",serialNumber:!0,pageNum:s,pageSize:u}),f.a.createElement(h.i,{total:c,pageNum:s,pageSize:u,onPageNumChange:function(t){return e.setState({pageNum:t},e.form.submit)},onPageSizeChange:function(t){return e.setState({pageSize:t,pageNum:1},e.form.submit)}}),f.a.createElement(v,{visible:d,id:m,isEdit:null!==m,onOk:function(){return e.setState({visible:!1},e.form.submit)},onCancel:function(){return e.setState({visible:!1})}}))}}]),a}(p.Component))||i}}]);
//# sourceMappingURL=14.59c0b353.chunk.js.map